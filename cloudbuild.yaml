steps:
# Construir la imagen a partir del Dockerfile en el repositorio
- name: 'Construir Imagen'
  args: 
    - 'build'
    - '-t'
    - 'gcr.io/$_PROJECT_ID/mycalc:gcp'
    - '.'
  dir: '.'  # Ruta al directorio que contiene el Dockerfile

# Subir la imagen al Artifact Registry
- name: 'Pushear al Artifact'
  args: 
    - 'push'
    - 'gcr.io/$_PROJECT_ID/mycalc:gcp'


# Iniciar sesi√≥n en Docker Hub
- name: 'Dockerhub Login'
  args: 
    - 'login'
    - '-u'
    - '$_DOCKERHUB_USERNAME'
    - '-p'
    - '$_DOCKERHUB_PASSWORD'

images:
  - 'valentingarciairiart/mycalc:gcp'
